---

borgbackup_install_from_binary: True
borgbackup_install_from_repo: False

borgbackup_binary_version: "1.0.9"
borgbackup_binary_platform: "borg-linux64"
borgbackup_binary_uri: "https://github.com/borgbackup/borg/releases/download/{{ borgbackup_binary_version }}/{{ borgbackup_binary_platform }}"
borgbackup_binary: "/usr/local/bin/borg"

borgbackup_client: False
# Specify the SSH private key type to use. By default role will generate
# ED25519 keys if they are supported by the remote host, otherwise RSA keys
# will be generated.
borgbackup_client_ssh_key_type: '{{ "ed25519"
                            if ("ssh-ed25519" in borgbackup_register_key_types.stdout_lines)
                            else "rsa" }}'
borgbackup_client_ssh_key_file: "/root/.ssh/id_{{ borgbackup_client_ssh_key_type }}-backup"
borgbackup_client_ssh_key_comment: 'root@{{ ansible_hostname }} generated by Ansible'
borgbackup_client_scripts_dir: "/etc/borg"
borgbackup_encryption_mode: "none"
borgbackup_passphrase: "yoursecret"
#borgbackup_client_backup_server: backup01.example.com
#borgbackup_client_jobs:
#  - name: system
#    options: "--compression zlib,6"
#    day: "*"
#    hour: "{{ 6 | random }}"
#    minute: "{{ 59 | random }}"
#    directories:
#      - "/etc/"
#      - "/home"
#    excludes: []

borgbackup_server: False
borgbackup_server_user: "borgbackup"
borgbackup_server_group: "borgbackup"
borgbackup_server_home: "/srv/borgbackup"
borgbackup_server_pool: "{{ borgbackup_server_home }}/repos"

borgbackup_prune_enabled: yes
borgbackup_prune_jobs:
  - name: system
    prune_options: "--keep-daily=7 --keep-weekly=4"
    day: "*"
    hour: "{{ 4 }}"
    minute: "{{ 0 }}"
  - name: scripts
    prune_options: "--keep-within=10d"
    day: "*"
    hour: "{{ 4 }}"
    minute: "{{ 0 }}"
